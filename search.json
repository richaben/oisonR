[{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"prérequis-pour-lutilisation-du-package","dir":"Articles","previous_headings":"","what":"Prérequis pour l’utilisation du package","title":"Comment utiliser le package oisonR ?","text":"L’utilisation de ce package est tributaire d’un accès à l’application de saisies opportunistes OISON, dont l’accès est réservé aux agents de l’OFB (création de compte nécessaire avant connexion). Certaines fonctions du package utilisent le couple login/mot de passe pour se connecter à la base de données OISON. Conseil : Pour ne pas les taper à chaque utilisation des fonctions, il est possible de stocker ses identifiants dans l’environnement R (et éviter une possible fuite). La marche à suivre pour les stocker :","code":"## 1° - ouvrir le fichier de configuration de l'environnement R avec la fonction : usethis::edit_r_environ()  ## 2° - dans la fenêtre ouverte intitulée '.Renviron',  # sauvegarder les lignes suivantes correspondant aux identifiants OISON_login = \"john.doe@ofb.gouv.fr\" OISON_mdp = \"moncodesecret\"  ## 3° - dans les fonctions, il suffit de les lignes suivantes (à la place des 'vrais' identifiants) : Sys.getenv('OISON_login') Sys.getenv('OISON_mdp')"},{"path":"https://richaben.github.io/oisonR/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Benoit Richard. Maintainer.","code":""},{"path":"https://richaben.github.io/oisonR/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Richard B (2023). oisonR: R Package pour collecter et utiliser les données OISON. R package version 0.1.0,  https://richaben.github.io/oisonR/, https://github.com/richaben/oisonR.","code":"@Manual{,   title = {oisonR: R Package pour collecter et utiliser les données OISON},   author = {Benoit Richard},   year = {2023},   note = {R package version 0.1.0,  https://richaben.github.io/oisonR/},   url = {https://github.com/richaben/oisonR}, }"},{"path":"https://richaben.github.io/oisonR/index.html","id":"oisonr-","dir":"","previous_headings":"","what":"R Package pour collecter et utiliser les données OISON","title":"R Package pour collecter et utiliser les données OISON","text":"oisonR est un package R pour les données OISON (OFB)","code":""},{"path":"https://richaben.github.io/oisonR/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"R Package pour collecter et utiliser les données OISON","text":"La version de développement sur GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"richaben/oisonR\")"},{"path":"https://richaben.github.io/oisonR/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"R Package pour collecter et utiliser les données OISON","text":"basic example shows solve common problem:","code":"## basic example code library(oisonR)"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_dpt.html","id":null,"dir":"Reference","previous_headings":"","what":"Consulter et télécharger les données sur les taxons de la bdd OISON pour un département — get_taxon_dpt","title":"Consulter et télécharger les données sur les taxons de la bdd OISON pour un département — get_taxon_dpt","text":"Consulter et télécharger les données sur les taxons de la bdd OISON pour un département","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_dpt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Consulter et télécharger les données sur les taxons de la bdd OISON pour un département — get_taxon_dpt","text":"","code":"get_taxon_dpt(   dpt_code,   login,   mdp,   collect_all = FALSE,   date_min = NULL,   date_max = NULL )"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_dpt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Consulter et télécharger les données sur les taxons de la bdd OISON pour un département — get_taxon_dpt","text":"dpt_code code du département (ex. 27) login login du compte OISON mdp mot de passe associé au compte OISON collect_all Booléen. Si FALSE (par défaut) consultation du nombre d'observation (FALSE). Si TRUE, télécharge les données pour les taxons. date_min date minimale pour la période au format (%Y-%m-%d ; cf. exemple '2022-01-01'). NULL par défaut. date_max date maximum pour la période au format (%Y-%m-%d ; cf. exemple '2022-12-31'). NULL par défaut.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_dpt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Consulter et télécharger les données sur les taxons de la bdd OISON pour un département — get_taxon_dpt","text":"Si collect_all=FALSE, retourne un dataframe indiquant le nombre d'observations dans le département.  Si collect_all=TRUE, retourne un dataframe avec le détail des observations taxons.  Si date_min et date_max sont spécifiés, retourne un dataframe avec les valeurs sur la période.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_dpt.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Consulter et télécharger les données sur les taxons de la bdd OISON pour un département — get_taxon_dpt","text":"","code":"if (FALSE) { # -> Exemple pour consulter rapidement le nombre d'observations dans le département 27, # sans téléchargement des données : get_taxon_dpt(dpt_code = \"27\",               login = \"john.doe@ofb.gouv.fr\",               mdp = \"mon_mdp\")  # -> Exemple pour consulter rapidement le nombre d'observations sur la période 2022 # dans le département 27, sans téléchargement des données : get_taxon_dpt(   dpt_code = \"27\",   login = \"john.doe@ofb.gouv.fr\",   mdp = \"mon_mdp\",   date_min = '2022-01-01',   date_max = '2022-12-31' )  # -> Exemple pour télécharger les données dans le département 27 obs_dpt27 <-   get_taxon_dpt(login = \"john.doe@ofb.gouv.fr\",                 mdp = \"mon_mdp\",                 dpt_code = \"27\",                 collect_all = T) }"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_polygon.html","id":null,"dir":"Reference","previous_headings":"","what":"Consulter et télécharger les données OISON sur une zone définie (type polygone) — get_taxon_polygon","title":"Consulter et télécharger les données OISON sur une zone définie (type polygone) — get_taxon_polygon","text":"Consulter et télécharger les données OISON sur une zone définie (type polygone)","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_polygon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Consulter et télécharger les données OISON sur une zone définie (type polygone) — get_taxon_polygon","text":"","code":"get_taxon_polygon(   zone_selection,   login,   mdp,   collect_all = FALSE,   draw_zone = FALSE,   date_min = NULL,   date_max = NULL )"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_polygon.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Consulter et télécharger les données OISON sur une zone définie (type polygone) — get_taxon_polygon","text":"zone_selection un objet contenant le zone (polygon), au CRS RGF93 (epsg: 2154) login login du compte OISON mdp mot de passe associé au compte OISON collect_all Booléen. Si FALSE (par défaut) consultation du nombre d'observation (FALSE). Si TRUE télécharge les données. draw_zone Booléen. Si TRUE, lance l'outil de sélection de zones. Par défaut, FALSE. date_min date minimale pour la période au format (%Y-%m-%d ; cf. exemple '2022-01-01'). NULL par défaut. date_max date maximum pour la période au format (%Y-%m-%d ; cf. exemple '2022-12-31'). NULL par défaut.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_polygon.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Consulter et télécharger les données OISON sur une zone définie (type polygone) — get_taxon_polygon","text":"Si collect_all=FALSE, retourne uniquement un dataframe avec le nombre d'observations associé  sur la zone géographique sélectionnée.  Si collect_all=TRUE, retourne un dataframe avec les observations pour les taxons.  Si date_min et date_max sont spécifiés, retourne un dataframe avec les valeurs sur la période.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_polygon.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Consulter et télécharger les données OISON sur une zone définie (type polygone) — get_taxon_polygon","text":"","code":"if (FALSE) { rm(selection_zone)  ## Exemple 1) Collecter des données sur un polygone défini manuellement: test_zone <-   \"POLYGON ((410677.9 6877209, 413275.2 6929083, 496961.8 6925506, 495122.6 6873600, 410677.9 6877209))\"  get_taxon_polygon(zone_selection = test_zone,                   login = \"john.doe@ofb.gouv.fr\",                   mdp = \"mon_mdp\",                   collect_all = F,                   draw_zone = F)  ## Exemple 2) Consulter des données sur un polygone tracé via l'outil de traçage: get_taxon_polygon(login = \"john.doe@ofb.gouv.fr\",                   mdp = \"mon_mdp\",                   collect_all = F,                   draw_zone = T)  ## Exemple 3) Collecter des données sur un polygone tracé en même temps avec l'outil de traçage: get_taxon_polygon(login = \"john.doe@ofb.gouv.fr\",                   mdp = \"mon_mdp\",                   collect_all = T,                   draw_zone = T)  ## Exemple 4) Consulter des données sur un polygone déjà sauvegardé dans l'environnement: get_taxon_polygon(login = \"john.doe@ofb.gouv.fr\",                   mdp = \"mon_mdp\",                   collect_all = F,                   draw_zone = F)  ## Exemple 5) Consulter des données sur un polygone connu et ## défini manuellement sur une période précise:  test_zone <-   \"POLYGON ((410677.9 6877209, 413275.2 6929083, 496961.8 6925506, 495122.6 6873600, 410677.9 6877209))\"  get_taxon_polygon(zone_selection = test_zone,                   login = \"john.doe@ofb.gouv.fr\",                   mdp = \"mon_mdp\",                   collect_all = F,                   draw_zone = T,                   date_min = '2022-01-01',                   date_max = '2022-12-31') }"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_region.html","id":null,"dir":"Reference","previous_headings":"","what":"Consulter et télécharger les données sur les taxons de la bdd OISON pour une région administrative — get_taxon_region","title":"Consulter et télécharger les données sur les taxons de la bdd OISON pour une région administrative — get_taxon_region","text":"Consulter et télécharger les données sur les taxons de la bdd OISON pour une région administrative","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_region.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Consulter et télécharger les données sur les taxons de la bdd OISON pour une région administrative — get_taxon_region","text":"","code":"get_taxon_region(   region_code,   login,   mdp,   collect_all = FALSE,   date_min = NULL,   date_max = NULL )"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_region.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Consulter et télécharger les données sur les taxons de la bdd OISON pour une région administrative — get_taxon_region","text":"region_code Code INSEE de la région (ex. 28 pour la Normandie, ...) login login du compte OISON mdp mot de passe associé au compte OISON collect_all Booléen. Si FALSE (par défaut) consultation du nombre d'observation. Si TRUE, télécharge les données pour les taxons. date_min date minimale pour la période au format (%Y-%m-%d ; cf. exemple '2022-01-01'). NULL par défaut. date_max date maximum pour la période au format (%Y-%m-%d ; cf. exemple '2022-12-31'). NULL par défaut.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_region.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Consulter et télécharger les données sur les taxons de la bdd OISON pour une région administrative — get_taxon_region","text":"Si collect_all=FALSE, retourne un dataframe indiquant le nombre d'observations sur la région choisie.  Si collect_all=TRUE, retourne un dataframe avec le détail des observations taxons.  Si date_min et date_max sont spécifiés, retourne un dataframe avec les valeurs sur la période.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_region.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Consulter et télécharger les données sur les taxons de la bdd OISON pour une région administrative — get_taxon_region","text":"","code":"if (FALSE) { # -> Exemple pour consulter rapidement le nombre de données dans la région # Ile-de-France (code région = 11)  get_taxon_region(region_code = \"11\",                  login = \"john.doe@ofb.gouv.fr\",                  mdp = \"mon_mdp\")  # -> Exemple pour télécharger les données dans # la région Île-de-France (code région 11)  obs_regIDF <-   get_taxon_region(region_code = \"11\",                    login = \"john.doe@ofb.gouv.fr\",                    mdp = \"mon_mdp\",                    collect_all = T)  # -> Exemple pour télécharger les données dans la région # Île-de-France (code région 11) sur la période 2022  obs_regIDF_2022 <-   get_taxon_region(login = \"john.doe@ofb.gouv.fr\",                    mdp = \"mon_mdp\",                    region_code = \"11\",                    date_min = '2022-01-01',                    date_max = '2022-12-31',                    collect_all = T) }"},{"path":"https://richaben.github.io/oisonR/reference/imp_importer_dump_oison.html","id":null,"dir":"Reference","previous_headings":"","what":"Fonction pour importer un dump de la base OISON — imp_importer_dump_oison","title":"Fonction pour importer un dump de la base OISON — imp_importer_dump_oison","text":"Fonction pour importer un dump de la base OISON","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_importer_dump_oison.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fonction pour importer un dump de la base OISON — imp_importer_dump_oison","text":"","code":"imp_importer_dump_oison(fichier_dump)"},{"path":"https://richaben.github.io/oisonR/reference/imp_importer_dump_oison.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fonction pour importer un dump de la base OISON — imp_importer_dump_oison","text":"fichier_dump chemin vers l'objet .sql du dump","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_importer_dump_oison.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fonction pour importer un dump de la base OISON — imp_importer_dump_oison","text":"L'ensemble des tables de la base (sauf tables 'mapping')","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_importer_dump_oison.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fonction pour importer un dump de la base OISON — imp_importer_dump_oison","text":"","code":"if (FALSE) { imp_importer_dump_oison(fichier_dump = \"./raw_data/PROD_oison.sql\") }"},{"path":"https://richaben.github.io/oisonR/reference/imp_inpn_habitats_taxon.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupération des codes Habitats des taxons sur l'INPN — imp_inpn_habitats_taxon","title":"Récupération des codes Habitats des taxons sur l'INPN — imp_inpn_habitats_taxon","text":"Récupération des codes Habitats des taxons sur l'INPN","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_inpn_habitats_taxon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Récupération des codes Habitats des taxons sur l'INPN — imp_inpn_habitats_taxon","text":"","code":"imp_inpn_habitats_taxon(df)"},{"path":"https://richaben.github.io/oisonR/reference/imp_inpn_habitats_taxon.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Récupération des codes Habitats des taxons sur l'INPN — imp_inpn_habitats_taxon","text":"df un dataframe issu de la requete OISON","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_inpn_habitats_taxon.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Récupération des codes Habitats des taxons sur l'INPN — imp_inpn_habitats_taxon","text":"un dataframe avec les codes habitats présents sur l'INPN","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_inpn_habitats_taxon.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Récupération des codes Habitats des taxons sur l'INPN — imp_inpn_habitats_taxon","text":"","code":"if (FALSE) { data_oison <- get_data_dpt(dpt_code = \"27\", login = \"john.doe@ofb.gouv.fr\", mdp = \"mon_mdp\")  code_habitats <- imp_inpn_habitats_taxon(df = data_oison)  }"},{"path":"https://richaben.github.io/oisonR/reference/imp_inpn_maille_taxon.html","id":null,"dir":"Reference","previous_headings":"","what":"Récupération des mailles 10x10km sur l'INPN sur une zone shape — imp_inpn_maille_taxon","title":"Récupération des mailles 10x10km sur l'INPN sur une zone shape — imp_inpn_maille_taxon","text":"Récupération des mailles 10x10km sur l'INPN sur une zone shape","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_inpn_maille_taxon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Récupération des mailles 10x10km sur l'INPN sur une zone shape — imp_inpn_maille_taxon","text":"","code":"imp_inpn_maille_taxon(df, shape)"},{"path":"https://richaben.github.io/oisonR/reference/imp_inpn_maille_taxon.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Récupération des mailles 10x10km sur l'INPN sur une zone shape — imp_inpn_maille_taxon","text":"df un dataframe issu de la requete OISON shape un dataframe contenant une couche shape pour la zone souhaitée","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_inpn_maille_taxon.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Récupération des mailles 10x10km sur l'INPN sur une zone shape — imp_inpn_maille_taxon","text":"un dataframe avec les mailles 10x10km INPN","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_inpn_maille_taxon.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Récupération des mailles 10x10km sur l'INPN sur une zone shape — imp_inpn_maille_taxon","text":"","code":"if (FALSE) {  data_oison <- get_data_dpt(dpt_code = \"27\", login = \"john.doe@ofb.gouv.fr\", mdp = \"mon_mdp\")  normandie_shp <- readRDS(file = './regions_geo_normandie.rds') %>% sf::st_transform(crs = 4326)  maille_inpn <- imp_inpn_maille_taxon(df = data_oison,  shape = normandie_shp)  }"},{"path":"https://richaben.github.io/oisonR/reference/mef_creer_table_taxon_oison.html","id":null,"dir":"Reference","previous_headings":"","what":"Fonction pour créer un tableau taxon issu de OISON — mef_creer_table_taxon_oison","title":"Fonction pour créer un tableau taxon issu de OISON — mef_creer_table_taxon_oison","text":"Cette fonction permet de créer un tableau avec les observations taxon présentes dans la  base OISON, à partir des tables importées par le dump de la base.","code":""},{"path":"https://richaben.github.io/oisonR/reference/mef_creer_table_taxon_oison.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fonction pour créer un tableau taxon issu de OISON — mef_creer_table_taxon_oison","text":"","code":"mef_creer_table_taxon_oison()"},{"path":"https://richaben.github.io/oisonR/reference/mef_creer_table_taxon_oison.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fonction pour créer un tableau taxon issu de OISON — mef_creer_table_taxon_oison","text":"un dataframe avec les observations taxons.  La colonne geometry spécifie le type de géométrie (point, lignes, polygones) pour l'observation,  et doit être traitée avec précaution lors d'un export sous un autre format (.csv, ...).","code":""},{"path":"https://richaben.github.io/oisonR/reference/mef_creer_table_taxon_oison.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fonction pour créer un tableau taxon issu de OISON — mef_creer_table_taxon_oison","text":"Nécessite au préalable d'importer le dump sql avec la fonction imp_importer_dump_oison.","code":""},{"path":"https://richaben.github.io/oisonR/reference/mef_creer_table_taxon_oison.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fonction pour créer un tableau taxon issu de OISON — mef_creer_table_taxon_oison","text":"","code":"if (FALSE) { df_taxon_oison <- mef_creer_table_taxon_oison() }"},{"path":"https://richaben.github.io/oisonR/reference/outil_selection_zone.html","id":null,"dir":"Reference","previous_headings":"","what":"Outil interactif pour tracer une zone (type polygone) — outil_selection_zone","title":"Outil interactif pour tracer une zone (type polygone) — outil_selection_zone","text":"Outil interactif pour tracer une zone (type polygone)","code":""},{"path":"https://richaben.github.io/oisonR/reference/outil_selection_zone.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Outil interactif pour tracer une zone (type polygone) — outil_selection_zone","text":"","code":"outil_selection_zone()"},{"path":"https://richaben.github.io/oisonR/reference/outil_selection_zone.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Outil interactif pour tracer une zone (type polygone) — outil_selection_zone","text":"Lance une fenêtre interactive Shiny pour sélectionner son polygone et  le sauver dans l'environnement pour une future requête  avec la fonction get_taxon_polygon.","code":""},{"path":"https://richaben.github.io/oisonR/reference/outil_selection_zone.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Outil interactif pour tracer une zone (type polygone) — outil_selection_zone","text":"","code":"if (FALSE) { # -> Lancer l'outil et suivre les instructions outil_selection_zone() }"},{"path":"https://richaben.github.io/oisonR/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://richaben.github.io/oisonR/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://richaben.github.io/oisonR/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://richaben.github.io/oisonR/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling `rhs(lhs)`.","code":""}]
