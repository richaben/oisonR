[{"path":"https://richaben.github.io/oisonR/articles/bien-demarrer-avec-oisonR.html","id":"pourquoi-un-package-oisonr","dir":"Articles","previous_headings":"","what":"Pourquoi un package oisonR ?","title":"1. Bien d√©marrer avec le package oisonR","text":"Ce package √©t√© d√©velopp√© pour faciliter l‚Äôacc√®s aux donn√©es bancaris√©es dans OISON, et ainsi permettre leur r√©-utilisation dans le cadre de projets de valorisation (t√©l√©chargement des donn√©es et mises en formes dans des formats exploitables).","code":""},{"path":"https://richaben.github.io/oisonR/articles/bien-demarrer-avec-oisonR.html","id":"installation-et-chargement","dir":"Articles","previous_headings":"Pourquoi un package oisonR ?","what":"Installation et chargement","title":"1. Bien d√©marrer avec le package oisonR","text":"","code":"# install.packages(\"devtools\") devtools::install_github(\"richaben/oisonR\", build_vignettes = TRUE)  # Chargement library(oisonR)"},{"path":"https://richaben.github.io/oisonR/articles/bien-demarrer-avec-oisonR.html","id":"pr√©requis-pour-lutilisation-du-package","dir":"Articles","previous_headings":"Pourquoi un package oisonR ?","what":"Pr√©requis pour l‚Äôutilisation du package","title":"1. Bien d√©marrer avec le package oisonR","text":"Avec ce package, l‚Äôacc√®s aux donn√©es OISON peut se faire via deux sources possibles : par une connexion directe √† l‚Äôapplication (via une API) n√©cessitant un acc√®s login/mot de passe. Par ce moyen, ce sont les donn√©es en temps r√©el qui peuvent √™tre obtenues ; mais elles sont t√©l√©charg√©es plus lentement (requ√™te limit√©e en nombre de lignes). par la base de donn√©es SQL. Cela n√©cessite d‚Äôobtenir les param√®tres de connexion √† la base au pr√©alable, et une connexion au r√©seau interne de l‚ÄôOFB (ou au VPN). Par ce moyen, les donn√©es accessibles sont dat√©es √† J-1 sur une copie de la base (en lecture seule). Ici, un volume important de donn√©es peut √™tre t√©l√©charg√© (plus rapidement que par l‚ÄôAPI). üí° Certaines fonctions exigent des param√®tres particuliers pour l‚Äôacc√®s aux donn√©es (par exemple login, mot de passe, etc‚Ä¶). Pour ne pas saisir ces param√®tres √† chaque utilisation, il est conseill√© de les stocker directement dans l‚Äôenvironnement R (cf.¬†proc√©dure ci-dessous). Deux fonctions utiles sont disponibles pour v√©rifier si les informations de connexion sont bien sauvegard√©es et stock√©es dans l‚Äôenvironnement R de l‚Äôutilisateur:","code":"## pour v√©rifier les √©l√©ments de connexion via l'api check_acces_oison_api()  ## pour v√©rifier les √©l√©ments de connexion via la connexion SQL check_acces_oison_sql()"},{"path":"https://richaben.github.io/oisonR/articles/bien-demarrer-avec-oisonR.html","id":"marche-√†-suivre-pour-stocker-des-informations-dans-lenvironnement-r","dir":"Articles","previous_headings":"Pourquoi un package oisonR ?","what":"Marche √† suivre pour stocker des informations dans l‚Äôenvironnement R","title":"1. Bien d√©marrer avec le package oisonR","text":"‚ö† Il faut bien renseigner les informations dans l‚Äôenvironnement R avec le m√™me nom que ci-dessous pour que ces √©l√©ments soient v√©rifiables et utilisables par les fonctions check_acces_oison_***(). Connexion via l‚ÄôAPI Connexion via la base SQL ‚ö† Requiert d‚Äôavoir la bonne configuration (les bons param√®tres)","code":"## 1¬∞ - ouvrir le fichier de configuration de l'environnement R avec la fonction : usethis::edit_r_environ()  ## 2¬∞ - dans la fen√™tre ouverte intitul√©e '.Renviron',  # sauvegarder les lignes suivantes correspondant aux identifiants OISON_ID = \"john.doe@ofb.gouv.fr\" OISON_PASSWORD = \"moncodesecret\"  ## 3¬∞ - dans les fonctions, ces informations peuvent √™tre utilis√©es avec les  ## lignes suivantes (√† la place des 'vrais' identifiants) : Sys.getenv('OISON_ID') Sys.getenv('OISON_PASSWORD') ## 1¬∞ - ouvrir le fichier de configuration de l'environnement R avec la fonction : usethis::edit_r_environ()  ## 2¬∞ - dans la fen√™tre ouverte intitul√©e '.Renviron',  # sauvegarder les lignes suivantes avec le bon param√©trage OISON_BDname = 'NOM_DE_LA_BDD' OISON_BDhostname = \"URL_DE_LA_BDD\" OISON_BDport = \"LE_PORT_DE_LA_BDD\" OISON_BDuid = \"IDENTIFIANT_DE_CONNEXION_A_LA_BDD\" OISON_BDpwd = \"MOT_DE_PASSE_DE_CONNEXION_A_LA_BDD\"  ## 3¬∞ - dans les fonctions, ces informations doivent √™tre utilis√©es avec les ## lignes suivantes : Sys.getenv('OISON_BDname') Sys.getenv('OISON_BDhostname') Sys.getenv('OISON_BDport') Sys.getenv('OISON_BDuid') Sys.getenv('OISON_BDpwd')"},{"path":[]},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"chargement-des-packages","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚Äôacc√®s √† la base SQL","what":"Chargement des packages","title":"2. Comment utiliser le package oisonR ?","text":"Quelques packages sont n√©cessaires pour ex√©cuter les exemples ci-dessous.","code":"library(oisonR) library(sf) library(dplyr) # devtools::install_github(\"MaelTheuliere/COGiter\") library(COGiter)"},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"les-observations-taxons","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚Äôacc√®s √† la base SQL","what":"Les observations taxons","title":"2. Comment utiliser le package oisonR ?","text":"Les observations taxons de OISON sont r√©cup√©rables avec la fonction get_table_taxon_sql(). Avant son utilisation, il faut toutefois : s‚Äôassurer de disposer des param√®tres de connexion √† la base SQL (cf. la vignette oisonR pour plus de d√©tails) ; puis, initier la connexion √† la base de donn√©es avec la fonction start_sql_connexion(). La fonction permet de r√©cup√©rer l‚Äôensemble des observations de la base, sauf si une g√©om√©trie est pr√©cis√©e en argument (argument geometrie dans la fonction). Apr√®s r√©cup√©ration des donn√©es, il est conseill√© de stopper la connexion √† la base avec la fonction stop_sql_connexion().","code":""},{"path":[]},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"cr√©ation-dune-g√©om√©trie-pour-la-bretagne","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚Äôacc√®s √† la base SQL > Les observations taxons > Exemple pour r√©aliser un export des observations taxons sur les √©crevisses en Bretagne pour l‚Äôann√©e 2023","what":"1. Cr√©ation d‚Äôune g√©om√©trie pour la Bretagne","title":"2. Comment utiliser le package oisonR ?","text":"Le package COGiter peut √™tre utilis√© pour r√©cup√©rer la g√©om√©trie correspondant √† la r√©gion, et la convertir en cha√Æne de caract√®res utilisables pour la requ√™te spatiale. Le d√©but de la g√©om√©trie prend la forme suivante : MULTIPOLYGON (((269637.9 6734259, 270864.3 6735502, 270508.8 6736507, 270517.1 6738116, 269527.2 673‚Ä¶..","code":"geom_BZH <-   COGiter::regions_geo %>%   # filtre sur BZH   dplyr::filter(REG == 53) %>%   sf::st_as_sfc() %>%   # convert to text   sf::st_as_text()"},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"r√©cup√©ration-des-donn√©es-observations-taxons","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚Äôacc√®s √† la base SQL > Les observations taxons > Exemple pour r√©aliser un export des observations taxons sur les √©crevisses en Bretagne pour l‚Äôann√©e 2023","what":"2. R√©cup√©ration des donn√©es observations taxons","title":"2. Comment utiliser le package oisonR ?","text":"Le r√©sultat de la requ√™te est un objet de type data.frame. Les noms de colonnes peuvent √™tre obtenus de la fa√ßon suivante :  ‚ö†Ô∏è noter qu‚Äôici les champs de donn√©es peuvent √™tre diff√©rents de ceux pr√©sents dans les exports de l‚Äôapplication OISON* (.e *champs manquants). Une vue simplifi√©e et facilement utilisable √©t√© privilig√©e !","code":"# a) connexion bdd_oison <- start_sql_connexion()  # b) requete oison_BZH <-    get_table_taxon_sql(conn = bdd_oison,                       geometrie = geom_BZH)  # d) stop de la connexion stop_sql_connexion(conn = bdd_oison) oison_BZH %>%    names()"},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"filtrage-des-donn√©es","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚Äôacc√®s √† la base SQL > Les observations taxons > Exemple pour r√©aliser un export des observations taxons sur les √©crevisses en Bretagne pour l‚Äôann√©e 2023","what":"3. Filtrage des donn√©es","title":"2. Comment utiliser le package oisonR ?","text":"Pour extraire les observations taxons correspondant aux √©crevisses dat√©es de 2023, il suffit de r√©aliser un filtrage √† partir () de la colonne nom_vernaculaire et (ii) de la nouvelle colonne annee (cr√©√©e √† partir de la colonne date) :","code":"oison_BZH_ecrevisse_2023 <-   oison_BZH %>%    # detection pattern 'creviss' et filtre   dplyr::filter(grepl('creviss', nom_vernaculaire)) %>%    # cr√©ation colonne annee   dplyr::mutate(annee = format(date, '%Y')) %>%    # filtre sur annee 2023   dplyr::filter(annee == 2023)"},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"visualisation-des-donn√©es","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚Äôacc√®s √† la base SQL > Les observations taxons > Exemple pour r√©aliser un export des observations taxons sur les √©crevisses en Bretagne pour l‚Äôann√©e 2023","what":"4. Visualisation des donn√©es","title":"2. Comment utiliser le package oisonR ?","text":"Pour une r√©utilisation en analyse spatiale, la colonne geometry doit √™tre convertie au format sf (simple features) avec la fonction st_as_sf() du package sf. Avec cet objet, les visualisations interactives sont possibles avec le package mapview (√† noter qu‚Äôil ne s‚Äôagit pas des vraies donn√©es dans l‚Äôexemple ci-dessous‚Ä¶ üï∂) :","code":"oison_BZH_ecrevisse_2023_sf <-   oison_BZH_ecrevisse_2023 %>%    sf::st_as_sf() oison_BZH_ecrevisse_2023_sf %>%    mapview::mapview()"},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"export-des-donn√©es","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚Äôacc√®s √† la base SQL > Les observations taxons > Exemple pour r√©aliser un export des observations taxons sur les √©crevisses en Bretagne pour l‚Äôann√©e 2023","what":"5. Export des donn√©es","title":"2. Comment utiliser le package oisonR ?","text":"L‚Äôexport sous diff√©rents formats est possible, dont le format geopackage (.gpkg) pour une r√©utilisation sous SIG. üí° Le format gpkg permet de conserver les diff√©rents types de g√©om√©tries pouvant se retrouver dans les observations OISON (points, polygones, lignes, ‚Ä¶).","code":"sf::write_sf(oison_BZH_ecrevisse_2023_sf,               \"D:/oison_BZH_ecrevisse_2023.gpkg\",               driver = \"GPKG\")"},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"les-observations-milieu","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚Äôacc√®s √† la base SQL","what":"Les observations milieu","title":"2. Comment utiliser le package oisonR ?","text":"Les observations milieu de OISON sont r√©cup√©rables avec la fonction get_table_milieu_sql(). Comme pr√©c√©demment, il faut disposer des param√®tres de connexion √† la base SQL (cf. la vignette oisonR pour plus de d√©tails). Par d√©faut, la fonction permet de r√©cup√©rer l‚Äôensemble des observations de la base, sauf si une g√©om√©trie est pr√©cis√©e en argument (argument geometrie dans la fonction).","code":""},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"exemple-pour-les-observations-milieu-pour-la-r√©gion-bretagne","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚Äôacc√®s √† la base SQL > Les observations milieu","what":"Exemple pour les observations milieu pour la r√©gion Bretagne","title":"2. Comment utiliser le package oisonR ?","text":"L‚Äôexemple ci-dessous correspond √† une extraction des observations milieu sur la zone g√©ographique de la r√©gion Bretagne, en utilisant l‚Äôobjet pr√©c√©demment cr√©√© (geom_BZH ; cf.¬†ci-dessus) : Le r√©sultat de la requ√™te est de nouveau un objet de type data.frame. Les noms de colonnes peuvent √™tre obtenus de la fa√ßon suivante :","code":"# a) connexion bdd_oison <- start_sql_connexion()  # b) requete oison_milieu_BZH <-    get_table_milieu_sql(conn = bdd_oison,                       geometrie = geom_BZH)  # d) stop de la connexion stop_sql_connexion(conn = bdd_oison) oison_milieu_BZH %>%    names()"},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"r√©cup√©rer-les-donn√©es-via-lapi","dir":"Articles","previous_headings":"","what":"R√©cup√©rer les donn√©es via l‚ÄôAPI","title":"2. Comment utiliser le package oisonR ?","text":"Trois fonctions permettent de r√©cup√©rer les donn√©es via une ‚ÄúAPI‚Äù. Pour le moment, il n‚Äôest possible que de r√©cup√©rer les observations taxons. Les fonctions sont les suivantes : get_taxon_dpt() pour r√©cup√©rer les observations taxons sur un d√©partement en sp√©cifiant son code insee ; get_taxon_region() pour r√©cup√©rer les observations taxons sur une r√©gion en sp√©cifiant son code insee ; get_taxon_polygon() pour r√©cup√©rer les observations taxons sur une zone g√©ographique d√©finie au pr√©alable ou trac√©e √† la vol√©e avec une fonction d√©di√©e. Avec ces 3 fonctions, il est possible de collecter les donn√©es (avec l‚Äôargument collect_all = TRUE) ou simplement consulter rapidement le nombre de donn√©es sur l‚Äô√©tendue g√©ographique (lorsque l‚Äôargument collect_all = FALSE). Une p√©riode de temps peut √™tre √©galement sp√©cifi√©e avec les arguments date_min et date_max. La r√©cup√©ration des donn√©es est s√©quenc√©e pour limiter la surcharge de l‚ÄôAPI.","code":""},{"path":[]},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"consultation-simple-sur-lann√©e-2022-avec-collect_all-false","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚ÄôAPI > Exemples pour le d√©partement 27 avec get_taxon_dpt()","what":"Consultation simple sur l‚Äôann√©e 2022 (avec collect_all = FALSE)","title":"2. Comment utiliser le package oisonR ?","text":"","code":"get_taxon_dpt(   dpt_code = \"27\",   login = \"john.doe@ofb.gouv.fr\",   mdp = \"mon_mdp\",   date_min = '2022-01-01',   date_max = '2022-12-31',   collect_all = F)"},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"r√©cup√©ration-des-donn√©es-sur-lann√©e-2022-avec-collect_all-true","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚ÄôAPI > Exemples pour le d√©partement 27 avec get_taxon_dpt()","what":"R√©cup√©ration des donn√©es sur l‚Äôann√©e 2022 (avec collect_all = TRUE)","title":"2. Comment utiliser le package oisonR ?","text":"Le r√©sultat de la requ√™te est de nouveau un objet de type data.frame. Les noms de colonnes peuvent √™tre obtenus de la fa√ßon suivante :","code":"oison_27_df <-    get_taxon_dpt(   dpt_code = \"27\",   login = \"john.doe@ofb.gouv.fr\",   mdp = \"mon_mdp\",   date_min = '2022-01-01',   date_max = '2022-12-31',   collect_all = T) oison_27_df %>%    names()"},{"path":"https://richaben.github.io/oisonR/articles/comment-utiliser-oisonR.html","id":"exemple-avec-la-fonction-get_taxon_polygon","dir":"Articles","previous_headings":"R√©cup√©rer les donn√©es via l‚ÄôAPI","what":"Exemple avec la fonction get_taxon_polygon()","title":"2. Comment utiliser le package oisonR ?","text":"Cette fonction permet de consulter/r√©cup√©rer (selon l‚Äôargument collect_all = FALSE ou collect_all = TRUE) les donn√©es sur une zone g√©ographique d√©finie par un polygone. Sp√©cifier une plage de date est √©galement possible. Le polygone peut : s‚Äô√©crire manuellement sous cette forme ; se tracer √† la vol√©e lorsque l‚Äôargument draw_zone = TRUE est sp√©cifi√© dans la fonction. D√®s lors, un outil de s√©lection de zone s‚Äôouvre (via une fen√™tre interactive shiny ; cf.¬†ci-dessous) permettant le tra√ßage du polygone et son stockage dans l‚Äôenvironnement de travail pour la requ√™te.","code":"#> [1] \"POLYGON ((410677.9 6877209, 413275.2 6929083, 496961.8 6925506, 495122.6 6873600, 410677.9 6877209))\" get_taxon_polygon(   login = \"john.doe@ofb.gouv.fr\",   mdp = \"mon_mdp\",   draw_zone = T,   collect_all = F)"},{"path":"https://richaben.github.io/oisonR/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Benoit Richard. Author, maintainer.","code":""},{"path":"https://richaben.github.io/oisonR/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Richard B (2024). oisonR: R Package pour collecter et utiliser les donn√©es OISON. R package version 0.2.0, https://richaben.github.io/oisonR/, https://github.com/richaben/oisonR.","code":"@Manual{,   title = {oisonR: R Package pour collecter et utiliser les donn√©es OISON},   author = {Benoit Richard},   year = {2024},   note = {R package version 0.2.0,     https://richaben.github.io/oisonR/},   url = {https://github.com/richaben/oisonR}, }"},{"path":"https://richaben.github.io/oisonR/index.html","id":"oisonr-","dir":"","previous_headings":"","what":"R Package pour collecter et utiliser les donn√©es OISON","title":"R Package pour collecter et utiliser les donn√©es OISON","text":"OISON est un outil de saisies naturalistes pour les agents de l‚ÄôOffice fran√ßais de la biodiversit√© (OFB). Il permet de collecter des donn√©es relatives aux esp√®ces et aux milieux, qui sont majoritairement issues d‚Äôobservations opportunistes, fortuites ou protocol√©es. L‚Äôacc√®s √† l‚Äôoutil est restreint et n√©cessite un compte utilisateur (cr√©ation de compte n√©cessaire). Ce package √©t√© d√©velopp√© dans le de faciliter l‚Äôacc√®s aux donn√©es bancaris√©es dans OISON, et ainsi permettre leur r√©-utilisation dans le cadre de projets de valorisation (t√©l√©chargement des donn√©es et mise en forme dans des formats exploitables).","code":""},{"path":"https://richaben.github.io/oisonR/index.html","id":"id_-installation-et-chargement","dir":"","previous_headings":"","what":"üì¶ Installation et chargement","title":"R Package pour collecter et utiliser les donn√©es OISON","text":"La version de d√©veloppement sur GitHub (le package devtools est √† installer si n√©cessaire). Pour charger le package oisonR :","code":"# install.packages(\"devtools\") devtools::install_github(\"richaben/oisonR\", build_vignettes = TRUE) library(oisonR)"},{"path":"https://richaben.github.io/oisonR/index.html","id":"id_-vignettes--documentation","dir":"","previous_headings":"","what":"üìö Vignettes / Documentation","title":"R Package pour collecter et utiliser les donn√©es OISON","text":"Quelques vignettes sont disponibles pour l‚Äôutilisation du package : Bien d√©marrer avec le package oisonR Comment utiliser le package oisonR ?","code":""},{"path":"https://richaben.github.io/oisonR/index.html","id":"id_Ô∏è-issues--bugs","dir":"","previous_headings":"","what":"‚úâÔ∏è Issues / Bugs","title":"R Package pour collecter et utiliser les donn√©es OISON","text":"Pour signaler un bug, une erreur ou une suggestion, merci d‚Äôutiliser les issues sur le d√©p√¥t GitHub du package.","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_habitats_taxon.html","id":null,"dir":"Reference","previous_headings":"","what":"R√©cup√©ration des Codes Habitats √† partir de la fiche taxon pr√©sente sur l'INPN ‚Äî add_inpn_habitats_taxon","title":"R√©cup√©ration des Codes Habitats √† partir de la fiche taxon pr√©sente sur l'INPN ‚Äî add_inpn_habitats_taxon","text":"partir d'un dataframe issu de la requ√™te OISON, cette fonction permet de r√©cup√©rer les informations relatives aux Habitats pr√©sent√©s sur la fiche taxon de l'INPN. Par exemple, pour le Rougegorge familier, les infos sont collect√©s sur sa fiche ici.","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_habitats_taxon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R√©cup√©ration des Codes Habitats √† partir de la fiche taxon pr√©sente sur l'INPN ‚Äî add_inpn_habitats_taxon","text":"","code":"add_inpn_habitats_taxon(df, cdnom_col, nom_vern_col, nom_sci_col)"},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_habitats_taxon.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R√©cup√©ration des Codes Habitats √† partir de la fiche taxon pr√©sente sur l'INPN ‚Äî add_inpn_habitats_taxon","text":"df un dataframe issu d'une requ√™te taxon OISON avec √† minima les 3 colonnes suivantes : - le nom vernaculaire - le nom scientifique - le code taxon cdnom_col le nom de la colonne contenant le code taxon utilis√© dans l'URL de l'INPN nom_vern_col le nom de la colonne contenant le(s) nom(s) vernaculaire(s) √† conserver nom_sci_col le nom de la colonne contenant le(s) nom(s) scientifique(s) √† conserver","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_habitats_taxon.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"R√©cup√©ration des Codes Habitats √† partir de la fiche taxon pr√©sente sur l'INPN ‚Äî add_inpn_habitats_taxon","text":"un dataframe avec les Codes Habitats pour chacun des taxons du tableau initial","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_habitats_taxon.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R√©cup√©ration des Codes Habitats √† partir de la fiche taxon pr√©sente sur l'INPN ‚Äî add_inpn_habitats_taxon","text":"","code":"if (FALSE) { # \\dontrun{ ## Requete sur quelques observations data_oison <-   oisonR::get_taxon_dpt(dpt_code = \"27\",                         login = \"john.doe@ofb.gouv.fr\",                         mdp = \"mon_mdp\",                         date_min = \"2023-01-01\",                         date_max = \"2023-02-01\",                         collect_all = TRUE) %>%   dplyr::select(cd_ref, nom_scientifique, nom_vernaculaire)  ## Collecte des informations Codes Habitats code_habitats <-   add_inpn_habitats_taxon(df = data_oison,                           cdnom_col = cd_ref,                           nom_sci_col = nom_scientifique,                           nom_vern_col = nom_vernaculaire)  } # }"},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_maille_taxon.html","id":null,"dir":"Reference","previous_headings":"","what":"R√©cup√©ration des mailles 10x10km sur l'INPN sur une zone shape ‚Äî add_inpn_maille_taxon","title":"R√©cup√©ration des mailles 10x10km sur l'INPN sur une zone shape ‚Äî add_inpn_maille_taxon","text":"R√©cup√©ration des mailles 10x10km sur l'INPN sur une zone shape","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_maille_taxon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R√©cup√©ration des mailles 10x10km sur l'INPN sur une zone shape ‚Äî add_inpn_maille_taxon","text":"","code":"add_inpn_maille_taxon(df, shape)"},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_maille_taxon.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R√©cup√©ration des mailles 10x10km sur l'INPN sur une zone shape ‚Äî add_inpn_maille_taxon","text":"df un dataframe issu de la requete OISON shape un dataframe contenant une couche shape pour la zone souhait√©e","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_maille_taxon.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"R√©cup√©ration des mailles 10x10km sur l'INPN sur une zone shape ‚Äî add_inpn_maille_taxon","text":"un dataframe avec les mailles 10x10km INPN","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_maille_taxon.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R√©cup√©ration des mailles 10x10km sur l'INPN sur une zone shape ‚Äî add_inpn_maille_taxon","text":"","code":"if (FALSE) { # \\dontrun{  data_oison <- get_data_dpt(dpt_code = \"27\", login = \"john.doe@ofb.gouv.fr\", mdp = \"mon_mdp\")  normandie_shp <- readRDS(file = './regions_geo_normandie.rds') %>% sf::st_transform(crs = 4326)  maille_inpn <- add_inpn_maille_taxon(df = data_oison,  shape = normandie_shp)  } # }"},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_repartition_taxon.html","id":null,"dir":"Reference","previous_headings":"","what":"R√©cup√©ration des infos de r√©partition d'un taxon √† l'√©chelle d√©partementale selon l'INPN ‚Äî add_inpn_repartition_taxon","title":"R√©cup√©ration des infos de r√©partition d'un taxon √† l'√©chelle d√©partementale selon l'INPN ‚Äî add_inpn_repartition_taxon","text":"La fonction permet de r√©cup√©rer rapidement les informations, quand elles existent, sur la r√©partition d'un taxon √† l'√©chelle des d√©partements sur le site de l'INPN. Ces informations sont utilis√©es pour la validation des donn√©es du SINP. Plusieurs statuts de pr√©sence/absence sont possibles (voir INPN pour plus d'infos). Exemple de carte de r√©partition pour la Salamandre tachet√©e : sur sa fiche ici.","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_repartition_taxon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R√©cup√©ration des infos de r√©partition d'un taxon √† l'√©chelle d√©partementale selon l'INPN ‚Äî add_inpn_repartition_taxon","text":"","code":"add_inpn_repartition_taxon(cd_nom, code_dpt)"},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_repartition_taxon.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R√©cup√©ration des infos de r√©partition d'un taxon √† l'√©chelle d√©partementale selon l'INPN ‚Äî add_inpn_repartition_taxon","text":"cd_nom le code cd_nom v√©rifi√© du taxon code_dpt le code insee du d√©partement","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_repartition_taxon.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"R√©cup√©ration des infos de r√©partition d'un taxon √† l'√©chelle d√©partementale selon l'INPN ‚Äî add_inpn_repartition_taxon","text":"un dataframe avec les informations de r√©partition pour le taxon","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_inpn_repartition_taxon.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R√©cup√©ration des infos de r√©partition d'un taxon √† l'√©chelle d√©partementale selon l'INPN ‚Äî add_inpn_repartition_taxon","text":"","code":"if (FALSE) { # \\dontrun{ ## Exemple pour la Salamandre tachet√©e sur le d√©partement du Calvados (14) oisonR::add_inpn_repartition_taxon(cd_nom = 965096, code_dpt = 14)  ## Pour une liste de taxons et de d√©partements ### 3 taxons taxons <- c(965096, # Salamandre tachet√©e            310, # Grenouille agile            77949 # Couleuvre verte et jaune            ) # 5 d√©partements departements <- c(14, 27, 50, 61, 76)  tidyr::expand_grid(taxons, departements) %>%   purrr::pmap_dfr(., ~add_inpn_repartition_taxon(cd_nom = .x, code_dpt = .y))  } # }"},{"path":"https://richaben.github.io/oisonR/reference/add_type_geometrie.html","id":null,"dir":"Reference","previous_headings":"","what":"Ajoute une colonne contenant le type de geometrie pour les observations ‚Äî add_type_geometrie","title":"Ajoute une colonne contenant le type de geometrie pour les observations ‚Äî add_type_geometrie","text":"Ajoute une colonne contenant le type de geometrie pour les observations","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_type_geometrie.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ajoute une colonne contenant le type de geometrie pour les observations ‚Äî add_type_geometrie","text":"","code":"add_type_geometrie(oison_df)"},{"path":"https://richaben.github.io/oisonR/reference/add_type_geometrie.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ajoute une colonne contenant le type de geometrie pour les observations ‚Äî add_type_geometrie","text":"oison_df un dataframe de classe sf","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_type_geometrie.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Ajoute une colonne contenant le type de geometrie pour les observations ‚Äî add_type_geometrie","text":"un dataframe avec une colonne `type_geometrie`","code":""},{"path":"https://richaben.github.io/oisonR/reference/add_type_geometrie.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Ajoute une colonne contenant le type de geometrie pour les observations ‚Äî add_type_geometrie","text":"","code":"if (FALSE) { # \\dontrun{ oison_taxon <-   oison_taxon %>%   sf::st_as_sf() %>%   add_type_geometrie() } # }"},{"path":"https://richaben.github.io/oisonR/reference/check_acces_oison_api.html","id":null,"dir":"Reference","previous_headings":"","what":"Test si les acc√®s √† l'API OISON sont bien renseign√©s ‚Äî check_acces_oison_api","title":"Test si les acc√®s √† l'API OISON sont bien renseign√©s ‚Äî check_acces_oison_api","text":"Fonction pour tester si les acc√®s login/mdp sont bien stock√©s dans l'environnement R (fichier `.Renviron`).","code":""},{"path":"https://richaben.github.io/oisonR/reference/check_acces_oison_api.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test si les acc√®s √† l'API OISON sont bien renseign√©s ‚Äî check_acces_oison_api","text":"","code":"check_acces_oison_api()"},{"path":"https://richaben.github.io/oisonR/reference/check_acces_oison_api.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test si les acc√®s √† l'API OISON sont bien renseign√©s ‚Äî check_acces_oison_api","text":"Aucune valeur. Une erreur est renvoy√©e si les acc√®s ne sont pas renseign√©s.","code":""},{"path":"https://richaben.github.io/oisonR/reference/check_acces_oison_api.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test si les acc√®s √† l'API OISON sont bien renseign√©s ‚Äî check_acces_oison_api","text":"","code":"if (FALSE) { # \\dontrun{ check_acces_oison_api() } # }"},{"path":"https://richaben.github.io/oisonR/reference/check_acces_oison_sql.html","id":null,"dir":"Reference","previous_headings":"","what":"Test si les param√®tres √† la BDD OISON en SQL sont bien renseign√©s ‚Äî check_acces_oison_sql","title":"Test si les param√®tres √† la BDD OISON en SQL sont bien renseign√©s ‚Äî check_acces_oison_sql","text":"Fonction pour tester si les param√®tres pour l'acc√®s √† la BDD OISON en SQL sont bien stock√©s dans l'environnement R (fichier `.Renviron`).","code":""},{"path":"https://richaben.github.io/oisonR/reference/check_acces_oison_sql.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test si les param√®tres √† la BDD OISON en SQL sont bien renseign√©s ‚Äî check_acces_oison_sql","text":"","code":"check_acces_oison_sql()"},{"path":"https://richaben.github.io/oisonR/reference/check_acces_oison_sql.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test si les param√®tres √† la BDD OISON en SQL sont bien renseign√©s ‚Äî check_acces_oison_sql","text":"Aucune valeur. Une erreur est renvoy√©e si les param√®tres ne sont pas renseign√©s.","code":""},{"path":"https://richaben.github.io/oisonR/reference/check_acces_oison_sql.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test si les param√®tres √† la BDD OISON en SQL sont bien renseign√©s ‚Äî check_acces_oison_sql","text":"","code":"if (FALSE) { # \\dontrun{ check_acces_oison_sql() } # }"},{"path":"https://richaben.github.io/oisonR/reference/get_table_milieu_sql.html","id":null,"dir":"Reference","previous_headings":"","what":"Fonction pour cr√©er le tableau milieu OISON via connexion SQL ‚Äî get_table_milieu_sql","title":"Fonction pour cr√©er le tableau milieu OISON via connexion SQL ‚Äî get_table_milieu_sql","text":"Permet de cr√©er une 'table milieu' √† partir de la base SQL. Par d√©faut, la table cr√©√©e correspond √† l'ensemble des observations sur les milieux bancaris√©s dans OISON. Si un argument geometrie est fourni, la table cr√©√©e correspond aux observations sur les milieux sur la zone g√©ographique sp√©cifi√©e par la g√©om√©trie.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_table_milieu_sql.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fonction pour cr√©er le tableau milieu OISON via connexion SQL ‚Äî get_table_milieu_sql","text":"","code":"get_table_milieu_sql(conn, geometrie, ...)"},{"path":"https://richaben.github.io/oisonR/reference/get_table_milieu_sql.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fonction pour cr√©er le tableau milieu OISON via connexion SQL ‚Äî get_table_milieu_sql","text":"conn nom de la base √† utiliser. geometrie cha√Æne de caract√®res.  Elle est utilis√©e pour la requ√™te SQL pour filtrer les donn√©es.  La g√©om√©trie doit √™tre sous la forme d'une cha√Æne de caract√®res (ex. \"POLYGON((x1 y1, x2 y2, x3 y3, x4 y4, x1 y1))\".  Sa projection doit √™tre en RGF93 / Lambert-93 (EPSG=2154). ... arguments suppl√©mentaires","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_table_milieu_sql.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fonction pour cr√©er le tableau milieu OISON via connexion SQL ‚Äî get_table_milieu_sql","text":"un dataframe avec les observations milieu","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_table_milieu_sql.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fonction pour cr√©er le tableau milieu OISON via connexion SQL ‚Äî get_table_milieu_sql","text":"","code":"if (FALSE) { # \\dontrun{ ### ------------- ### ## Exemple 1. Export sans g√©om√©trie bdd_oison <- start_sql_connexion()  df_milieu_oison_sql <- get_table_milieu_sql(conn = bd_oison)  stop_sql_connexion(conn = bdd_oison)  ### ------------- ### ## Exemple 2. Export avec g√©om√©trie sp√©cifi√©e # a) cr√©er une g√©om√©trie # devtools::install_github(\"MaelTheuliere/COGiter\")  geom_normandie <-   COGiter::regions_geo %>%   dplyr::filter(REG == 28) %>%   sf::st_as_sfc() %>%   # convert to text   sf::st_as_text()  # b) faire la requ√™te bdd_oison <- start_sql_connexion()  df_taxon_milieu_sql_normandie <- get_table_milieu_sql(conn = bdd_oison, geometrie = geom_normandie)  stop_sql_connexion(conn = bdd_oison) } # }"},{"path":"https://richaben.github.io/oisonR/reference/get_table_taxon_sql.html","id":null,"dir":"Reference","previous_headings":"","what":"Fonction pour cr√©er le tableau taxon OISON via connexion SQL ‚Äî get_table_taxon_sql","title":"Fonction pour cr√©er le tableau taxon OISON via connexion SQL ‚Äî get_table_taxon_sql","text":"Permet de cr√©er une 'table taxon' √† partir de la base SQL. Par d√©faut, la table cr√©√©e correspond √† l'ensemble des observations sur les taxons bancaris√©s dans OISON. Si un argument geometrie est fourni, la table cr√©√©e correspond aux observations sur les taxons sur la zone g√©ographique sp√©cifi√©e par la g√©om√©trie.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_table_taxon_sql.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fonction pour cr√©er le tableau taxon OISON via connexion SQL ‚Äî get_table_taxon_sql","text":"","code":"get_table_taxon_sql(conn, geometrie, ...)"},{"path":"https://richaben.github.io/oisonR/reference/get_table_taxon_sql.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fonction pour cr√©er le tableau taxon OISON via connexion SQL ‚Äî get_table_taxon_sql","text":"conn nom de la base √† utiliser geometrie cha√Æne de caract√®res.  Elle est utilis√©e pour la requ√™te SQL pour filtrer les donn√©es.  La g√©om√©trie doit √™tre sous la forme d'une cha√Æne de caract√®res (ex. \"POLYGON((x1 y1, x2 y2, x3 y3, x4 y4, x1 y1))\".  Sa projection doit √™tre en RGF93 / Lambert-93 (EPSG=2154). ... arguments suppl√©mentaires","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_table_taxon_sql.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fonction pour cr√©er le tableau taxon OISON via connexion SQL ‚Äî get_table_taxon_sql","text":"un dataframe avec les observations taxons.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_table_taxon_sql.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fonction pour cr√©er le tableau taxon OISON via connexion SQL ‚Äî get_table_taxon_sql","text":"","code":"if (FALSE) { # \\dontrun{ ### ------------- ### ## Exemple 1. Export sans g√©om√©trie bdd_oison <- start_sql_connexion()  df_taxon_oison_sql <- get_table_taxon_sql(conn = bd_oison)  stop_sql_connexion(conn = bdd_oison)  ### ------------- ### ## Exemple 2. Export avec g√©om√©trie sp√©cifi√©e # a) cr√©er une g√©om√©trie # devtools::install_github(\"MaelTheuliere/COGiter\")  geom_normandie <-   COGiter::regions_geo %>%   dplyr::filter(REG == 28) %>%   sf::st_as_sfc() %>%   # convert to text   sf::st_as_text()  # b) faire la requ√™te bdd_oison <- start_sql_connexion()  df_taxon_oison_sql_normandie <- get_table_taxon_sql(conn = bdd_oison, geometrie = geom_normandie)  stop_sql_connexion(conn = bdd_oison)  } # }"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_dpt.html","id":null,"dir":"Reference","previous_headings":"","what":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour un d√©partement ‚Äî get_taxon_dpt","title":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour un d√©partement ‚Äî get_taxon_dpt","text":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour un d√©partement","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_dpt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour un d√©partement ‚Äî get_taxon_dpt","text":"","code":"get_taxon_dpt(   dpt_code,   login,   mdp,   collect_all = FALSE,   date_min = NULL,   date_max = NULL )"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_dpt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour un d√©partement ‚Äî get_taxon_dpt","text":"dpt_code code du d√©partement (ex. 27) login login du compte OISON mdp mot de passe associ√© au compte OISON collect_all Bool√©en. Si FALSE (par d√©faut) consultation du nombre d'observation (FALSE). Si TRUE, t√©l√©charge les donn√©es pour les taxons. date_min date minimale pour la p√©riode au format (%Y-%m-%d ; cf. exemple '2022-01-01'). NULL par d√©faut. date_max date maximum pour la p√©riode au format (%Y-%m-%d ; cf. exemple '2022-12-31'). NULL par d√©faut.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_dpt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour un d√©partement ‚Äî get_taxon_dpt","text":"Si collect_all=FALSE, retourne un dataframe indiquant le nombre d'observations dans le d√©partement.  Si collect_all=TRUE, retourne un dataframe avec le d√©tail des observations taxons.  Si date_min et date_max sont sp√©cifi√©s, retourne un dataframe avec les valeurs sur la p√©riode.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_dpt.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour un d√©partement ‚Äî get_taxon_dpt","text":"","code":"if (FALSE) { # \\dontrun{ # -> Exemple pour consulter rapidement le nombre d'observations dans le d√©partement 27, # sans t√©l√©chargement des donn√©es : get_taxon_dpt(dpt_code = \"27\",               login = \"john.doe@ofb.gouv.fr\",               mdp = \"mon_mdp\")  # -> Exemple pour consulter rapidement le nombre d'observations sur la p√©riode 2022 # dans le d√©partement 27, sans t√©l√©chargement des donn√©es : get_taxon_dpt(   dpt_code = \"27\",   login = \"john.doe@ofb.gouv.fr\",   mdp = \"mon_mdp\",   date_min = '2022-01-01',   date_max = '2022-12-31' )  # -> Exemple pour t√©l√©charger les donn√©es dans le d√©partement 27 obs_dpt27 <-   get_taxon_dpt(login = \"john.doe@ofb.gouv.fr\",                 mdp = \"mon_mdp\",                 dpt_code = \"27\",                 collect_all = T) } # }"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_polygon.html","id":null,"dir":"Reference","previous_headings":"","what":"Consulter et t√©l√©charger les donn√©es OISON sur une zone d√©finie (type polygone) ‚Äî get_taxon_polygon","title":"Consulter et t√©l√©charger les donn√©es OISON sur une zone d√©finie (type polygone) ‚Äî get_taxon_polygon","text":"Consulter et t√©l√©charger les donn√©es OISON sur une zone d√©finie (type polygone)","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_polygon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Consulter et t√©l√©charger les donn√©es OISON sur une zone d√©finie (type polygone) ‚Äî get_taxon_polygon","text":"","code":"get_taxon_polygon(   zone_selection,   login,   mdp,   collect_all = FALSE,   draw_zone = FALSE,   date_min = NULL,   date_max = NULL )"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_polygon.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Consulter et t√©l√©charger les donn√©es OISON sur une zone d√©finie (type polygone) ‚Äî get_taxon_polygon","text":"zone_selection un objet contenant le zone (polygon), au CRS RGF93 (epsg: 2154) login login du compte OISON mdp mot de passe associ√© au compte OISON collect_all Bool√©en. Si FALSE (par d√©faut) consultation du nombre d'observation (FALSE). Si TRUE t√©l√©charge les donn√©es. draw_zone Bool√©en. Si TRUE, lance l'outil de s√©lection de zones. Par d√©faut, FALSE. date_min date minimale pour la p√©riode au format (%Y-%m-%d ; cf. exemple '2022-01-01'). NULL par d√©faut. date_max date maximum pour la p√©riode au format (%Y-%m-%d ; cf. exemple '2022-12-31'). NULL par d√©faut.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_polygon.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Consulter et t√©l√©charger les donn√©es OISON sur une zone d√©finie (type polygone) ‚Äî get_taxon_polygon","text":"Si collect_all=FALSE, retourne uniquement un dataframe avec le nombre d'observations associ√©  sur la zone g√©ographique s√©lectionn√©e.  Si collect_all=TRUE, retourne un dataframe avec les observations pour les taxons.  Si date_min et date_max sont sp√©cifi√©s, retourne un dataframe avec les valeurs sur la p√©riode.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_polygon.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Consulter et t√©l√©charger les donn√©es OISON sur une zone d√©finie (type polygone) ‚Äî get_taxon_polygon","text":"","code":"if (FALSE) { # \\dontrun{ rm(selection_zone)  ## Exemple 1) Collecter des donn√©es sur un polygone d√©fini manuellement: test_zone <-   \"POLYGON ((410677.9 6877209, 413275.2 6929083, 496961.8 6925506, 495122.6 6873600, 410677.9 6877209))\"  get_taxon_polygon(zone_selection = test_zone,                   login = \"john.doe@ofb.gouv.fr\",                   mdp = \"mon_mdp\",                   collect_all = F,                   draw_zone = F)  ## Exemple 2) Consulter des donn√©es sur un polygone trac√© via l'outil de tra√ßage: get_taxon_polygon(login = \"john.doe@ofb.gouv.fr\",                   mdp = \"mon_mdp\",                   collect_all = F,                   draw_zone = T)  ## Exemple 3) Collecter des donn√©es sur un polygone trac√© en m√™me temps avec l'outil de tra√ßage: get_taxon_polygon(login = \"john.doe@ofb.gouv.fr\",                   mdp = \"mon_mdp\",                   collect_all = T,                   draw_zone = T)  ## Exemple 4) Consulter des donn√©es sur un polygone d√©j√† sauvegard√© dans l'environnement: get_taxon_polygon(login = \"john.doe@ofb.gouv.fr\",                   mdp = \"mon_mdp\",                   collect_all = F,                   draw_zone = F)  ## Exemple 5) Consulter des donn√©es sur un polygone connu et ## d√©fini manuellement sur une p√©riode pr√©cise:  test_zone <-   \"POLYGON ((410677.9 6877209, 413275.2 6929083, 496961.8 6925506, 495122.6 6873600, 410677.9 6877209))\"  get_taxon_polygon(zone_selection = test_zone,                   login = \"john.doe@ofb.gouv.fr\",                   mdp = \"mon_mdp\",                   collect_all = F,                   draw_zone = T,                   date_min = '2022-01-01',                   date_max = '2022-12-31') } # }"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_region.html","id":null,"dir":"Reference","previous_headings":"","what":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour une r√©gion administrative ‚Äî get_taxon_region","title":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour une r√©gion administrative ‚Äî get_taxon_region","text":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour une r√©gion administrative","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_region.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour une r√©gion administrative ‚Äî get_taxon_region","text":"","code":"get_taxon_region(   region_code,   login,   mdp,   collect_all = FALSE,   date_min = NULL,   date_max = NULL )"},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_region.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour une r√©gion administrative ‚Äî get_taxon_region","text":"region_code Code INSEE de la r√©gion (ex. 28 pour la Normandie, ...) login login du compte OISON mdp mot de passe associ√© au compte OISON collect_all Bool√©en. Si FALSE (par d√©faut) consultation du nombre d'observation. Si TRUE, t√©l√©charge les donn√©es pour les taxons. date_min date minimale pour la p√©riode au format (%Y-%m-%d ; cf. exemple '2022-01-01'). NULL par d√©faut. date_max date maximum pour la p√©riode au format (%Y-%m-%d ; cf. exemple '2022-12-31'). NULL par d√©faut.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_region.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour une r√©gion administrative ‚Äî get_taxon_region","text":"Si collect_all=FALSE, retourne un dataframe indiquant le nombre d'observations sur la r√©gion choisie.  Si collect_all=TRUE, retourne un dataframe avec le d√©tail des observations taxons.  Si date_min et date_max sont sp√©cifi√©s, retourne un dataframe avec les valeurs sur la p√©riode.","code":""},{"path":"https://richaben.github.io/oisonR/reference/get_taxon_region.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Consulter et t√©l√©charger les donn√©es sur les taxons de la bdd OISON pour une r√©gion administrative ‚Äî get_taxon_region","text":"","code":"if (FALSE) { # \\dontrun{ # -> Exemple pour consulter rapidement le nombre de donn√©es dans la r√©gion # Ile-de-France (code r√©gion = 11)  get_taxon_region(region_code = \"11\",                  login = \"john.doe@ofb.gouv.fr\",                  mdp = \"mon_mdp\")  # -> Exemple pour t√©l√©charger les donn√©es dans # la r√©gion √éle-de-France (code r√©gion 11)  obs_regIDF <-   get_taxon_region(region_code = \"11\",                    login = \"john.doe@ofb.gouv.fr\",                    mdp = \"mon_mdp\",                    collect_all = T)  # -> Exemple pour t√©l√©charger les donn√©es dans la r√©gion # √éle-de-France (code r√©gion 11) sur la p√©riode 2022  obs_regIDF_2022 <-   get_taxon_region(login = \"john.doe@ofb.gouv.fr\",                    mdp = \"mon_mdp\",                    region_code = \"11\",                    date_min = '2022-01-01',                    date_max = '2022-12-31',                    collect_all = T) } # }"},{"path":"https://richaben.github.io/oisonR/reference/imp_importer_dump_oison.html","id":null,"dir":"Reference","previous_headings":"","what":"Fonction pour importer un dump de la base OISON ‚Äî imp_importer_dump_oison","title":"Fonction pour importer un dump de la base OISON ‚Äî imp_importer_dump_oison","text":"Fonction pour importer un dump de la base OISON","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_importer_dump_oison.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fonction pour importer un dump de la base OISON ‚Äî imp_importer_dump_oison","text":"","code":"imp_importer_dump_oison(fichier_dump)"},{"path":"https://richaben.github.io/oisonR/reference/imp_importer_dump_oison.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fonction pour importer un dump de la base OISON ‚Äî imp_importer_dump_oison","text":"fichier_dump chemin vers l'objet .sql du dump","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_importer_dump_oison.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fonction pour importer un dump de la base OISON ‚Äî imp_importer_dump_oison","text":"L'ensemble des tables de la base (sauf tables 'mapping')","code":""},{"path":"https://richaben.github.io/oisonR/reference/imp_importer_dump_oison.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fonction pour importer un dump de la base OISON ‚Äî imp_importer_dump_oison","text":"","code":"if (FALSE) { # \\dontrun{ imp_importer_dump_oison(fichier_dump = \"./raw_data/PROD_oison.sql\") } # }"},{"path":"https://richaben.github.io/oisonR/reference/mef_dump_creer_table_taxon.html","id":null,"dir":"Reference","previous_headings":"","what":"Fonction pour cr√©er un tableau taxon issu d'un dump OISON ‚Äî mef_dump_creer_table_taxon","title":"Fonction pour cr√©er un tableau taxon issu d'un dump OISON ‚Äî mef_dump_creer_table_taxon","text":"Cette fonction permet de cr√©er un tableau avec les observations taxon pr√©sentes dans la  base OISON, √† partir des tables import√©es par le dump de la base.","code":""},{"path":"https://richaben.github.io/oisonR/reference/mef_dump_creer_table_taxon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fonction pour cr√©er un tableau taxon issu d'un dump OISON ‚Äî mef_dump_creer_table_taxon","text":"","code":"mef_dump_creer_table_taxon()"},{"path":"https://richaben.github.io/oisonR/reference/mef_dump_creer_table_taxon.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fonction pour cr√©er un tableau taxon issu d'un dump OISON ‚Äî mef_dump_creer_table_taxon","text":"un dataframe avec les observations taxons.  La colonne geometry sp√©cifie le type de g√©om√©trie (point, lignes, polygones) pour l'observation,  et doit √™tre trait√©e avec pr√©caution lors d'un export sous un autre format (.csv, ...).","code":""},{"path":"https://richaben.github.io/oisonR/reference/mef_dump_creer_table_taxon.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fonction pour cr√©er un tableau taxon issu d'un dump OISON ‚Äî mef_dump_creer_table_taxon","text":"N√©cessite au pr√©alable d'importer le dump sql avec la fonction imp_importer_dump_oison.","code":""},{"path":"https://richaben.github.io/oisonR/reference/mef_dump_creer_table_taxon.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fonction pour cr√©er un tableau taxon issu d'un dump OISON ‚Äî mef_dump_creer_table_taxon","text":"","code":"if (FALSE) { # \\dontrun{ df_taxon_oison <- mef_dump_creer_table_taxon() } # }"},{"path":"https://richaben.github.io/oisonR/reference/oisonR-package.html","id":null,"dir":"Reference","previous_headings":"","what":"oisonR: R Package pour collecter et utiliser les donn√©es OISON ‚Äî oisonR-package","title":"oisonR: R Package pour collecter et utiliser les donn√©es OISON ‚Äî oisonR-package","text":"Ensemble de fonctions pour utiliser les donn√©es bancaris√©es sur OISON, l'application pour les saisies opportunistes de l'Office fran√ßais de la biodiversit√© (OFB).","code":""},{"path":[]},{"path":"https://richaben.github.io/oisonR/reference/oisonR-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"oisonR: R Package pour collecter et utiliser les donn√©es OISON ‚Äî oisonR-package","text":"Maintainer: Benoit Richard benoit.richard@ofb.gouv.fr (ORCID)","code":""},{"path":"https://richaben.github.io/oisonR/reference/outil_selection_zone.html","id":null,"dir":"Reference","previous_headings":"","what":"Outil interactif pour tracer une zone (type polygone) ‚Äî outil_selection_zone","title":"Outil interactif pour tracer une zone (type polygone) ‚Äî outil_selection_zone","text":"Outil interactif pour tracer une zone (type polygone)","code":""},{"path":"https://richaben.github.io/oisonR/reference/outil_selection_zone.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Outil interactif pour tracer une zone (type polygone) ‚Äî outil_selection_zone","text":"","code":"outil_selection_zone()"},{"path":"https://richaben.github.io/oisonR/reference/outil_selection_zone.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Outil interactif pour tracer une zone (type polygone) ‚Äî outil_selection_zone","text":"Lance une fen√™tre interactive Shiny pour s√©lectionner son polygone et  le sauver dans l'environnement pour une future requ√™te  avec la fonction get_taxon_polygon.","code":""},{"path":"https://richaben.github.io/oisonR/reference/outil_selection_zone.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Outil interactif pour tracer une zone (type polygone) ‚Äî outil_selection_zone","text":"","code":"if (FALSE) { # \\dontrun{ # -> Lancer l'outil et suivre les instructions outil_selection_zone() } # }"},{"path":"https://richaben.github.io/oisonR/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator ‚Äî %>%","title":"Pipe operator ‚Äî %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://richaben.github.io/oisonR/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator ‚Äî %>%","text":"","code":"lhs %>% rhs"},{"path":"https://richaben.github.io/oisonR/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator ‚Äî %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://richaben.github.io/oisonR/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator ‚Äî %>%","text":"result calling `rhs(lhs)`.","code":""},{"path":"https://richaben.github.io/oisonR/reference/start_sql_connexion.html","id":null,"dir":"Reference","previous_headings":"","what":"D√©marre une connexion √† OISON via la base de donn√©es SQL ‚Äî start_sql_connexion","title":"D√©marre une connexion √† OISON via la base de donn√©es SQL ‚Äî start_sql_connexion","text":"Fonction qui utilise les param√®tres de connexion √† la base stock√©s dans l'environnement R (fichier `.Renviron`), et lance la connexion √† la base.","code":""},{"path":"https://richaben.github.io/oisonR/reference/start_sql_connexion.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"D√©marre une connexion √† OISON via la base de donn√©es SQL ‚Äî start_sql_connexion","text":"","code":"start_sql_connexion()"},{"path":"https://richaben.github.io/oisonR/reference/start_sql_connexion.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"D√©marre une connexion √† OISON via la base de donn√©es SQL ‚Äî start_sql_connexion","text":"Aucune valeur. Une erreur est renvoy√©e si la connexion est impossible.","code":""},{"path":"https://richaben.github.io/oisonR/reference/start_sql_connexion.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"D√©marre une connexion √† OISON via la base de donn√©es SQL ‚Äî start_sql_connexion","text":"","code":"if (FALSE) { # \\dontrun{ bdd_oison <- start_sql_connexion() } # }"},{"path":"https://richaben.github.io/oisonR/reference/stop_sql_connexion.html","id":null,"dir":"Reference","previous_headings":"","what":"Stoppe une connexion √† OISON via la base de donn√©es SQL ‚Äî stop_sql_connexion","title":"Stoppe une connexion √† OISON via la base de donn√©es SQL ‚Äî stop_sql_connexion","text":"Fonction stoppe la connexion √† la base.","code":""},{"path":"https://richaben.github.io/oisonR/reference/stop_sql_connexion.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stoppe une connexion √† OISON via la base de donn√©es SQL ‚Äî stop_sql_connexion","text":"","code":"stop_sql_connexion(conn)"},{"path":"https://richaben.github.io/oisonR/reference/stop_sql_connexion.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stoppe une connexion √† OISON via la base de donn√©es SQL ‚Äî stop_sql_connexion","text":"conn nom de la base √† stopper.","code":""},{"path":"https://richaben.github.io/oisonR/reference/stop_sql_connexion.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stoppe une connexion √† OISON via la base de donn√©es SQL ‚Äî stop_sql_connexion","text":"Aucune valeur.","code":""},{"path":"https://richaben.github.io/oisonR/reference/stop_sql_connexion.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Stoppe une connexion √† OISON via la base de donn√©es SQL ‚Äî stop_sql_connexion","text":"","code":"if (FALSE) { # \\dontrun{ bdd_oison <- start_sql_connexion()  stop_sql_connexion(conn = bdd_oison) } # }"}]
